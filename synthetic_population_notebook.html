

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Creating synthetic population &#8212; Tradesman TBD documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'synthetic_population_notebook';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">Tradesman TBD documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="build_analytics_model.html">
                        Analytics models
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data_sources.html">
                        Data sources
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="zoning.html">
                        Building Zones
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="synthetic_population.html">
                        Synthetic Populations
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="build_analytics_model.html">
                        Analytics models
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data_sources.html">
                        Data sources
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="zoning.html">
                        Building Zones
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="synthetic_population.html">
                        Synthetic Populations
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Creating synthetic population</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="Creating-synthetic-population">
<h1>Creating synthetic population<a class="headerlink" href="#Creating-synthetic-population" title="Permalink to this heading">#</a></h1>
<p>On this tutorial we will show how to use our synthetic population module.</p>
<p>So, first things first, we are going to build our Tradesman model, but instead of using our <code class="docutils literal notranslate"><span class="pre">model()</span></code> method, our model will be a bit more simple, with political boundaries and subdivisions, population, population by sex and age, and traffic assignment zones (TAZs).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">tradesman.model</span> <span class="kn">import</span> <span class="n">Tradesman</span>

<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">gettempdir</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">folder</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">)</span>

<span class="n">model_place</span> <span class="o">=</span> <span class="s2">&quot;San Marino&quot;</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">Tradesman</span><span class="p">(</span><span class="n">network_path</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span> <span class="n">model_place</span><span class="o">=</span><span class="n">model_place</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">add_country_borders</span><span class="p">()</span>

<span class="n">project</span><span class="o">.</span><span class="n">import_subdivisions</span><span class="p">(</span><span class="s2">&quot;geoboundaries&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">import_population</span><span class="p">()</span>

<span class="n">project</span><span class="o">.</span><span class="n">build_zoning</span><span class="p">()</span>

<span class="n">project</span><span class="o">.</span><span class="n">import_pop_by_sex_and_age</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Expect 5,472 total hexbins for this bounding box
Done 0/9 states
1
</pre></div></div>
</div>
<p>Now we are going to add the data necessary to create our synthetic population.</p>
<p>The data necessary to create the synthetic population is gathered on the fly, so you don’t have to worry about doing this exhaustive task.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">build_population_synthesizer_data</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Calculated vs Expected percentual of households per size in the sample

# Person      Calculated    Expected
----------  ------------  ----------
1 person           30.58       31.1
2-3 person         48.11       46.56
4-5 person         20.27       21.29
6+ person           1.03        1.05

Difference in calculated vs expected percentual of households in the sample

# Person      Diff.
----------  -------
1 person      -0.52
2-3 person     1.55
4-5 person    -1.02
6+ person     -0.02

</pre></div></div>
</div>
<p>But let’s suppose you have our own zoning systems, our own data, or you don’t like the existing controls. What can you do to use our own data?</p>
<p>It’s quiet simple: you can use one of the functions of user_control_import and change the files used to create the synthetic population. But be careful! <strong>You must keep consistency across all files, otherwise PopulationSim will not be able to create the synthetic population.</strong></p>
<p>Suppose you don’t like the default controls. There are too many age brackets per sex, and you want to add some controls you believe are relevant and are not in the default file. What can you do?</p>
<p>It is possible for you to create your own control file and overwite the default one with the following function.</p>
<p><strong>But be careful!</strong> If you change the controls, you mustchange the validation parameters, as we will see later on, otherwise populationsim will fail to create the synthetic population.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tradesman.model_creation.synthetic_population.user_control_import</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_change_controls</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">scr_file</span><span class="o">=</span><span class="s2">&quot;../path/to/new/control/file.csv&quot;</span><span class="p">,</span>
                     <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Now, let’s say you want to create synthetic populations with more information, rather than just age, sex, occupation and journey to work, as well as synthetic households with more information than just number of persons and average household income. What can you do?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_change_settings</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">household_settings</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NEW_HH_SETTING_1&#39;</span><span class="p">,</span> <span class="s2">&quot;NEW_HH_SETTING_2&quot;</span><span class="p">],</span>
                     <span class="n">persons_settings</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NEW_PP_SETTING_1&#39;</span><span class="p">,</span> <span class="s2">&quot;NEW_PP_SETTING_2&quot;</span><span class="p">,</span> <span class="s2">&quot;NEW_PP_SETTING_3&quot;</span><span class="p">],</span>
                     <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">))</span>
<br/></pre></div>
</div>
</div>
<p>Ok. We’ve been changing controls and adding more information to our synthetic population. But let’s suppose now that you have added information to the control file that don’t exist in the current seed population and household files, or you have an up to date seed that suits your purpose well.</p>
<p>To use your own data, you can change the current seeds!</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_change_seeds</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                  <span class="n">household_seed_path</span><span class="o">=</span><span class="s2">&quot;../path/to/new/household/seeds.csv&quot;</span><span class="p">,</span>
                  <span class="n">persons_seed_path</span><span class="o">=</span><span class="s2">&quot;../path/to/new/persons/seeds.csv&quot;</span><span class="p">,</span>
                  <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">))</span>
<br/></pre></div>
</div>
</div>
<p>We’ve been doing a nice work so far, and I believe you’ve already understood that if you change to your files, you must keep consistency of your changes across all other files! So, let’s continue our tutorial.</p>
<p>Suppose that your data has other geographies rather than our’s TAZ &lt; PUMA &lt; REGION. To replace the current geographies, you can use the following funciton:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_change_geographies</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">seed_geography</span><span class="o">=</span><span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span>
                        <span class="n">upper_geography</span><span class="o">=</span><span class="s2">&quot;STATE&quot;</span><span class="p">,</span>
                        <span class="n">lower_geography</span><span class="o">=</span><span class="s2">&quot;DISTRICT&quot;</span><span class="p">,</span>
                        <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">))</span>
<br/></pre></div>
</div>
</div>
<p>As you might have changed some files, we must update the control files to keep consistency. With the following command, you can add your own controls to the model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_import_new_totals</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">totals_lower_level</span><span class="o">=</span><span class="s2">&quot;../path/to/new/control_totals_taz.csv&quot;</span><span class="p">,</span>
                       <span class="n">totals_upper_level</span><span class="o">=</span><span class="s2">&quot;../path/to/new/control_totals_meta.csv&quot;</span><span class="p">,</span>
                       <span class="n">geographies</span><span class="o">=</span><span class="s2">&quot;../path/to/new/geo_cross_walk.csv&quot;</span><span class="p">,</span>
                       <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">))</span>
<br/></pre></div>
</div>
</div>
<p>Later, you must check if our validation parameters are consistent with both geographies and controls previously used. If not, you can change the controls manually.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_change_validation_parameters</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">model_place</span><span class="o">=</span><span class="n">model_place</span><span class="p">,</span>
                                  <span class="n">dest_folder</span><span class="o">=</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">),</span>
                                  <span class="n">aggregate_summaries</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;citzenship_status&quot;</span><span class="p">,</span>
                                                        <span class="s2">&quot;geography&quot;</span><span class="p">:</span> <span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span>
                                                        <span class="s2">&quot;control&quot;</span><span class="p">:</span> <span class="s2">&quot;citz_status_control&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;citz_status_result&quot;</span><span class="p">},</span>
                                                       <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}],</span>
                                  <span class="n">geographies</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;STATE&quot;</span><span class="p">,</span> <span class="s2">&quot;COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;DISTRICT&quot;</span><span class="p">])</span>
<br/></pre></div>
</div>
</div>
<p>Finally, after we are done with the input files, we can create our synthetic poupulation.</p>
<p>We can run our model multi-threaded or single threaded. Let’s suppose we want to run our model with two threads, instead of a single one.</p>
<p>WARNING:depending on the number of TAZs, populationsim can take quite a long time to create the synthetic population due to model’s fragmentation even with multiple threads. This happens because currently we only have data in TAZ level. So please, be a little patient, and check out the documentation for more information about this matter.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">synthesize_population</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>After finishing the creation of synthetic persons and households, we can validate our results.</p>
<p>The following function will display the validation of controlled and non-controlled variables, and the files with the pictures displayed here can be find at the model’s folder.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tradesman.model_creation.synthetic_population.create_synthetic_population</span> <span class="kn">import</span> <span class="n">validate_synthetic_population</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">validate_synthetic_population</span><span class="p">(</span><span class="n">model_place</span><span class="o">=</span><span class="n">model_place</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Households with at least one member in the range (percentage)
found | expected
Under 15
23.58  |  22.63
Under 18
28.78  |  26.26
Under 20
31.11  |  28.81
Over 60
43.05  |  45.78
Over 65
34.91  |  36.82
Households with members in age range (percentage)
found | expected
Under 15 and 60 years and older
1.40  |  1.68
Under 15 and 65 years and older
1.21  |  1.22
Under 18 and 60 years and older
2.43  |  2.07
Under 18 and 65 years and older
1.72  |  1.45
Under 20 and 60 years and older
2.61  |  2.45
Under 20 and 65 years and older
1.90  |  1.63
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/synthetic_population_notebook_23_1.png" src="_images/synthetic_population_notebook_23_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/synthetic_population_notebook_23_2.png" src="_images/synthetic_population_notebook_23_2.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/synthetic_population_notebook_23_3.png" src="_images/synthetic_population_notebook_23_3.png" />
</div>
</div>
<p>Now we have finished our little tutorial about Tradesman’s creation of synthetic population.</p>
<p>See you in a next tutorial!</p>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/synthetic_population_notebook.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner"></div>
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, Pedro Camargo.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>